<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Surrogate Tree Explorer</title>

  <link rel="stylesheet" href="/static_main_node/styles.css">

  </head>

  <body>
    <div id="myModal" class="modal">
      <!-- Modal content -->
      <div class="modal-content">
        <div>
          <p>
            In this system, we are going to generate rules that describe the behaviors of a black box model. Please specify support* and the max number of features you want to reach for each rule.
          </p>  
          <div style="font-size: 12px">
            <p>
              *support: the number of instances that match a rule.
            </p>
          </div>
        </div>
        
        <div class="flex-col" style="display:flex; justify-content: center">
          <div>
            <span title="lower bound of support">Support: </span>
            <input id="support_val" value=0>
          </div>
          <div>
            <!-- <p id="feat-text" style="margin-bottom: 1px">Max Number of Features:</p>
            <div id="slider-feat"></div> -->
            <span>Max Number of Features: </span>
            <input id="feature_val" value=22>
          </div>
          <div>
            <button id="update_cancel" onclick="click_cancel()">Cancel</button>
            <button id="generate_rule">Generate Rules</button>
          </div>
        </div>
        
      </div>
    </div>

    <svg width="0" height="0">
      <pattern id="diagonalHatch" patternUnits="userSpaceOnUse" width="4" height="4">
        <path d="M-1,1 l2,-2
                 M0,4 l4,-4
                 M3,5 l2,-2" 
              style="stroke:black; stroke-width:1" />
      </pattern>
    </svg>
    <div class="flex-row">
      
      <!-- Main view of the rules -->
      <div class="flex-col" style="border: 1px solid lightgrey; 
        margin-left: 5px;
        width: 1250px;
        height: 670px;
        margin-top: -10px;">
        <!-- Tree Overview -->
        <div class="flex-col" style="margin-left: 5px;">
          <div class="title" style="margin: 0;">
            <span>Tree Summary</span>    
            <!-- <input style="border: 1px solid grey; padding: 1px; width: 12px; margin-left: 10px; border-radius: 50%;" 
              type="image" src="static_main_node/shrink_vertical.png" 
            > 
            <input style="border: 1px solid grey; padding: 1px; width: 12px; margin-left: 10px; border-radius: 50%;" 
              type="image" src="static_main_node/expand_vertical.png"  -->
            <!-- >         -->
          </div>
          <div class="flex-row">
              <!-- Summary View -->
              <div class="flex-col">
                <div id="summary_div" class="flex-row" style="overflow: scroll; max-height: 240px; border: 1px solid lightgrey; margin-bottom: 5px;">
                  <div id="radio_group" class="felx-col"></div>
                  <svg id="summary_view"></svg>
                </div>
              </div>

              <!-- Statics -->
              <div class="flex-col" style="margin-left: 5px">
                <div class='flex-col' id="setting-block">
              
                  <!-- Tab links -->
                  <div class="tab" id="setting-tabs">
                    <input class="tablinks active" onclick="click_setting_tab(event, 'data-setting')"
                       type="image" src="static_main_node/icon/data-icon.png" >
                    </input>
                    <input class="tablinks" onclick="click_setting_tab(event, 'vis-setting')"
                      type="image" src="static_main_node/icon/vis-icon.png">
                      
                    </input>
                  </div>

                  <!-- Rule/Node Generation Setting -->
                  <div class="flex-col tabcontent" id="data-setting" style="display: flex">
                    <!-- Pruning -->
                    <div class="title flex-row" style="margin-right: 20px">
                      <span>Number of Rules: </span>
                      <span id="rule-num" style="font-weight: normal;"></span>
                      <div>
                        <input style="border-bottom: none; width: 15px; margin-left: 10px"  type="image" src="static_main_node/icon/gear.png" 
                        onclick="click_setting()">                      
                      </div>
                    </div>

                    <!-- Filtering Accuracy -->
                    <span id="accuracy-text" style="margin-bottom: 1px">Accuracy:</span>
                    <div id="slider-accuracy"></div>

                    <!-- Sorting rows -->
                    <div class='flex-row'>
                      <div class="title"><span>Sorting Rules by: </span></div>
                      <select>
                        <option>Accuracy</option>
                        <option>F1</option>
                        <option>Recall</option>
                        <option>Precision</option>
                        <option>Support</option>
                        <option>Fidelity</option>
                        <!-- <option>Dissimilarity</option> -->
                      </select>
                    </div>

                    <!-- Sorting columns -->
                    <!-- <div class='flex-row' style="margin-right: 20px">
                      <div class="title"><span>Sorting Features by: </span></div>
                      <select id="col_sort">
                        <option value="feat_freq">Feature Frequency</option>
                      </select>
                    </div> -->
                  </div>

                  <!-- Visualization Settings -->
                  <div class="tabcontent flex-col" id="vis-setting">
                    <div class='flex-row'>
                      <div class="title"><span>Node Encoding </span></div>
                      <select id="node_encoding">
                        <option value="accuracy">Accuracy</option>
                        <option value="purity">Purity</option>
                        <option value="fidelity">Fidelity</option>
                      </select>
                    </div>

                    <div class='flex-row'>
                      <div class="title"><span>Layout</span></div>
                      <select id="layout">
                        <option value="tree">Tree Layout</option>
                        <option value="stat">Statistics</option>
                      </select>
                    </div>

                    <div class='flex-row' id="x-setting" style="display: none">
                      <div class="title"><span>x-axis</span></div>
                      <select id="x_position">
                        <option value="fidelity">Fidelity</option>
                        <option value="accuracy">Accuracy</option>
                      </select>
                    </div>
                  </div>

                  <!-- <hr width="190px" style="margin: 5px 0 5px 0;"> -->
                </div>

                <!-- legend -->
                <div class="flex-col">
                  <div class="title">
                    <span>Legend</span>
                  </div>
                  <svg id="legend1"></svg>
                </div>
              </div>
          </div>
        </div>

        <!-- Rules -->
        <div id="rule-detail">
          <!-- Tab links -->
          <div class="tab">
            <button class="tablinks active" onclick="showRule(event, 'overview')">
              Overview
            </button>
            <button class="tablinks" onclick="showRule(event, 'linked')">
              Selected Nodes
            </button>
            <button class="tablinks" onclick="showRule(event, 'level')">
              Selected Level
            </button>
          </div>

          <!-- Overview -->
          <div class="flex-col tabcontent" id="overview" style="display: flex">
            <div id="column_div" style="max-width: 1200px; overflow-x: scroll;">
              <div>
                <svg id="column_svg"></svg>            
              </div>
            </div>

            <div class="flex-row" style="max-height: 150px; max-width: 1250px; overflow: scroll;">
              <div id="rule_div" style="height: 150px; max-width: 1200px; overflow: scroll;">
                <div>
                  <svg id="rule_svg"></svg>            
                </div>
              </div>
              <div id="stat_div" style="max-height: 150px; max-width: 100px; overflow-y: scroll;">
                <div>
                  <svg id="stat"></svg>              
                </div>
              </div>
            </div>
          </div>

          <!-- Linked nodes-->
          <div class="flex-col tabcontent" id="linked">
            <div id="column_div2" style="max-width: 1200px; overflow-x: scroll;">
              <div>
                <svg id="column_svg2"></svg>            
              </div>
            </div>

            <div class="flex-row" style="max-height: 150px; max-width: 1250px; overflow: scroll;">
              <div id="rule_div2" style="height: 150px; max-width: 1200px; overflow: scroll;">
                <div>
                  <svg id="rule_svg2"></svg>            
                </div>
              </div>
              <div id="stat_div2" style="max-height: 150px; max-width: 100px; overflow-y: scroll;">
                <div>
                  <svg id="stat2"></svg>              
                </div>
              </div>
            </div>
          </div>

          <!-- Selected Level -->
          <div class="flex-col tabcontent" id="level">
            <div id="column_div3" style="max-width: 1200px; overflow-x: scroll;">
              <div>
                <svg id="column_svg3"></svg>            
              </div>
            </div>

            <div class="flex-row" style="max-height: 150px; max-width: 1250px; overflow: scroll;">
              <div id="rule_div3" style="height: 150px; max-width: 1200px; overflow: scroll;">
                <div>
                  <svg id="rule_svg3"></svg>            
                </div>
              </div>
              <div id="stat_div3" style="max-height: 150px; max-width: 100px; overflow-y: scroll;">
                <div>
                  <svg id="stat3"></svg>              
                </div>
              </div>
            </div>
          </div>

        </div>

        <div id="rule_description" class="flex-col">          
        </div>

        <div id="data-table"></div>
        </div>  
    </div>
    
    <canvas id="myCanvas" width="0" height="0"></canvas>
  	
	<!-- load the d3.js library -->	
	<script src="http://d3js.org/d3.v4.min.js"></script>
	<script src="https://d3js.org/d3-queue.v3.min.js"></script>
  <script src="https://d3js.org/d3-scale.v3.min.js"></script>
  <script src="https://unpkg.com/d3-simple-slider"></script>

  <script src="/static_main_node/const.js"></script>
  <script src="/static_main_node/util.js"></script>
  <script src="/static_main_node/tree_summary.js"></script>
  <script src="/static_main_node/summary_view.js"></script>
  <script src="/static_main_node/legend.js"></script>
  <script src="/static_main_node/controller.js"></script>
  <script src="/static_main_node/linked_rule_view.js"></script>
  <script src="/static_main_node/interactive_table.js"></script>
  </body>
</html>